74541a185da952630f8c17aad958dc5d
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _classPrivateFieldLooseBase2 = _interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldLooseBase"));
var _classPrivateFieldLooseKey2 = _interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldLooseKey"));
var _registry = (0, _classPrivateFieldLooseKey2.default)("registry");
var EventEmitter = exports.default = function () {
  function EventEmitter() {
    (0, _classCallCheck2.default)(this, EventEmitter);
    Object.defineProperty(this, _registry, {
      writable: true,
      value: {}
    });
  }
  return (0, _createClass2.default)(EventEmitter, [{
    key: "addListener",
    value: function addListener(eventType, listener, context) {
      if (typeof listener !== 'function') {
        throw new TypeError('EventEmitter.addListener(...): 2nd argument must be a function.');
      }
      var registrations = allocate((0, _classPrivateFieldLooseBase2.default)(this, _registry)[_registry], eventType);
      var registration = {
        context: context,
        listener: listener,
        remove: function remove() {
          registrations.delete(registration);
        }
      };
      registrations.add(registration);
      return registration;
    }
  }, {
    key: "emit",
    value: function emit(eventType) {
      var registrations = (0, _classPrivateFieldLooseBase2.default)(this, _registry)[_registry][eventType];
      if (registrations != null) {
        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
          args[_key - 1] = arguments[_key];
        }
        for (var registration of Array.from(registrations)) {
          registration.listener.apply(registration.context, args);
        }
      }
    }
  }, {
    key: "removeAllListeners",
    value: function removeAllListeners(eventType) {
      if (eventType == null) {
        (0, _classPrivateFieldLooseBase2.default)(this, _registry)[_registry] = {};
      } else {
        delete (0, _classPrivateFieldLooseBase2.default)(this, _registry)[_registry][eventType];
      }
    }
  }, {
    key: "listenerCount",
    value: function listenerCount(eventType) {
      var registrations = (0, _classPrivateFieldLooseBase2.default)(this, _registry)[_registry][eventType];
      return registrations == null ? 0 : registrations.size;
    }
  }]);
}();
function allocate(registry, eventType) {
  var registrations = registry[eventType];
  if (registrations == null) {
    registrations = new Set();
    registry[eventType] = registrations;
  }
  return registrations;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFdmVudEVtaXR0ZXIiLCJleHBvcnRzIiwiZGVmYXVsdCIsIl9jbGFzc0NhbGxDaGVjazIiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsIl9yZWdpc3RyeSIsIndyaXRhYmxlIiwidmFsdWUiLCJfY3JlYXRlQ2xhc3MyIiwia2V5IiwiYWRkTGlzdGVuZXIiLCJldmVudFR5cGUiLCJsaXN0ZW5lciIsImNvbnRleHQiLCJUeXBlRXJyb3IiLCJyZWdpc3RyYXRpb25zIiwiYWxsb2NhdGUiLCJfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UyIiwicmVnaXN0cmF0aW9uIiwicmVtb3ZlIiwiZGVsZXRlIiwiYWRkIiwiZW1pdCIsIl9sZW4iLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJhcmdzIiwiQXJyYXkiLCJfa2V5IiwiZnJvbSIsImFwcGx5IiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwibGlzdGVuZXJDb3VudCIsInNpemUiLCJyZWdpc3RyeSIsIlNldCJdLCJzb3VyY2VzIjpbIkV2ZW50RW1pdHRlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZsb3cgc3RyaWN0XG4gKiBAZm9ybWF0XG4gKi9cblxuZXhwb3J0IGludGVyZmFjZSBFdmVudFN1YnNjcmlwdGlvbiB7XG4gIHJlbW92ZSgpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElFdmVudEVtaXR0ZXI8VEV2ZW50VG9BcmdzTWFwOiB7Li4ufT4ge1xuICBhZGRMaXN0ZW5lcjxURXZlbnQ6ICRLZXlzPFRFdmVudFRvQXJnc01hcD4+KFxuICAgIGV2ZW50VHlwZTogVEV2ZW50LFxuICAgIGxpc3RlbmVyOiAoLi4uYXJnczogVEV2ZW50VG9BcmdzTWFwW1RFdmVudF0pID0+IG1peGVkLFxuICAgIGNvbnRleHQ/OiBtaXhlZCxcbiAgKTogRXZlbnRTdWJzY3JpcHRpb247XG5cbiAgZW1pdDxURXZlbnQ6ICRLZXlzPFRFdmVudFRvQXJnc01hcD4+KFxuICAgIGV2ZW50VHlwZTogVEV2ZW50LFxuICAgIC4uLmFyZ3M6IFRFdmVudFRvQXJnc01hcFtURXZlbnRdXG4gICk6IHZvaWQ7XG5cbiAgcmVtb3ZlQWxsTGlzdGVuZXJzPFRFdmVudDogJEtleXM8VEV2ZW50VG9BcmdzTWFwPj4oZXZlbnRUeXBlPzogP1RFdmVudCk6IHZvaWQ7XG5cbiAgbGlzdGVuZXJDb3VudDxURXZlbnQ6ICRLZXlzPFRFdmVudFRvQXJnc01hcD4+KGV2ZW50VHlwZTogVEV2ZW50KTogbnVtYmVyO1xufVxuXG5pbnRlcmZhY2UgUmVnaXN0cmF0aW9uPFRBcmdzPiB7XG4gICtjb250ZXh0OiBtaXhlZDtcbiAgK2xpc3RlbmVyOiAoLi4uYXJnczogVEFyZ3MpID0+IG1peGVkO1xuICArcmVtb3ZlOiAoKSA9PiB2b2lkO1xufVxuXG50eXBlIFJlZ2lzdHJ5PFRFdmVudFRvQXJnc01hcDogey4uLn0+ID0gJE9iak1hcDxcbiAgVEV2ZW50VG9BcmdzTWFwLFxuICA8VEFyZ3M+KFRBcmdzKSA9PiBTZXQ8UmVnaXN0cmF0aW9uPFRBcmdzPj4sXG4+O1xuXG4vKipcbiAqIEV2ZW50RW1pdHRlciBtYW5hZ2VzIGxpc3RlbmVycyBhbmQgcHVibGlzaGVzIGV2ZW50cyB0byB0aGVtLlxuICpcbiAqIEV2ZW50RW1pdHRlciBhY2NlcHRzIGEgc2luZ2xlIHR5cGUgcGFyYW1ldGVyIHRoYXQgZGVmaW5lcyB0aGUgdmFsaWQgZXZlbnRzXG4gKiBhbmQgYXNzb2NpYXRlZCBsaXN0ZW5lciBhcmd1bWVudChzKS5cbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqICAgY29uc3QgZW1pdHRlciA9IG5ldyBFdmVudEVtaXR0ZXI8e1xuICogICAgIHN1Y2Nlc3M6IFtudW1iZXIsIHN0cmluZ10sXG4gKiAgICAgZXJyb3I6IFtFcnJvcl0sXG4gKiAgIH0+KCk7XG4gKlxuICogICBlbWl0dGVyLm9uKCdzdWNjZXNzJywgKHN0YXR1c0NvZGUsIHJlc3BvbnNlVGV4dCkgPT4gey4uLn0pO1xuICogICBlbWl0dGVyLmVtaXQoJ3N1Y2Nlc3MnLCAyMDAsICcuLi4nKTtcbiAqXG4gKiAgIGVtaXR0ZXIub24oJ2Vycm9yJywgZXJyb3IgPT4gey4uLn0pO1xuICogICBlbWl0dGVyLmVtaXQoJ2Vycm9yJywgbmV3IEVycm9yKCdSZXNvdXJjZSBub3QgZm91bmQnKSk7XG4gKlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFdmVudEVtaXR0ZXI8VEV2ZW50VG9BcmdzTWFwOiB7Li4ufT5cbiAgaW1wbGVtZW50cyBJRXZlbnRFbWl0dGVyPFRFdmVudFRvQXJnc01hcD5cbntcbiAgI3JlZ2lzdHJ5OiBSZWdpc3RyeTxURXZlbnRUb0FyZ3NNYXA+ID0ge307XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhIGxpc3RlbmVyIHRoYXQgaXMgY2FsbGVkIHdoZW4gdGhlIHN1cHBsaWVkIGV2ZW50IGlzIGVtaXR0ZWQuXG4gICAqIFJldHVybnMgYSBzdWJzY3JpcHRpb24gdGhhdCBoYXMgYSBgcmVtb3ZlYCBtZXRob2QgdG8gdW5kbyByZWdpc3RyYXRpb24uXG4gICAqL1xuICBhZGRMaXN0ZW5lcjxURXZlbnQ6ICRLZXlzPFRFdmVudFRvQXJnc01hcD4+KFxuICAgIGV2ZW50VHlwZTogVEV2ZW50LFxuICAgIGxpc3RlbmVyOiAoLi4uYXJnczogVEV2ZW50VG9BcmdzTWFwW1RFdmVudF0pID0+IG1peGVkLFxuICAgIGNvbnRleHQ6IG1peGVkLFxuICApOiBFdmVudFN1YnNjcmlwdGlvbiB7XG4gICAgaWYgKHR5cGVvZiBsaXN0ZW5lciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgJ0V2ZW50RW1pdHRlci5hZGRMaXN0ZW5lciguLi4pOiAybmQgYXJndW1lbnQgbXVzdCBiZSBhIGZ1bmN0aW9uLicsXG4gICAgICApO1xuICAgIH1cbiAgICBjb25zdCByZWdpc3RyYXRpb25zID0gYWxsb2NhdGU8XG4gICAgICBURXZlbnRUb0FyZ3NNYXAsXG4gICAgICBURXZlbnQsXG4gICAgICBURXZlbnRUb0FyZ3NNYXBbVEV2ZW50XSxcbiAgICA+KHRoaXMuI3JlZ2lzdHJ5LCBldmVudFR5cGUpO1xuICAgIGNvbnN0IHJlZ2lzdHJhdGlvbjogUmVnaXN0cmF0aW9uPFRFdmVudFRvQXJnc01hcFtURXZlbnRdPiA9IHtcbiAgICAgIGNvbnRleHQsXG4gICAgICBsaXN0ZW5lcixcbiAgICAgIHJlbW92ZSgpOiB2b2lkIHtcbiAgICAgICAgcmVnaXN0cmF0aW9ucy5kZWxldGUocmVnaXN0cmF0aW9uKTtcbiAgICAgIH0sXG4gICAgfTtcbiAgICByZWdpc3RyYXRpb25zLmFkZChyZWdpc3RyYXRpb24pO1xuICAgIHJldHVybiByZWdpc3RyYXRpb247XG4gIH1cblxuICAvKipcbiAgICogRW1pdHMgdGhlIHN1cHBsaWVkIGV2ZW50LiBBZGRpdGlvbmFsIGFyZ3VtZW50cyBzdXBwbGllZCB0byBgZW1pdGAgd2lsbCBiZVxuICAgKiBwYXNzZWQgdGhyb3VnaCB0byBlYWNoIG9mIHRoZSByZWdpc3RlcmVkIGxpc3RlbmVycy5cbiAgICpcbiAgICogSWYgYSBsaXN0ZW5lciBtb2RpZmllcyB0aGUgbGlzdGVuZXJzIHJlZ2lzdGVyZWQgZm9yIHRoZSBzYW1lIGV2ZW50LCB0aG9zZVxuICAgKiBjaGFuZ2VzIHdpbGwgbm90IGJlIHJlZmxlY3RlZCBpbiB0aGUgY3VycmVudCBpbnZvY2F0aW9uIG9mIGBlbWl0YC5cbiAgICovXG4gIGVtaXQ8VEV2ZW50OiAkS2V5czxURXZlbnRUb0FyZ3NNYXA+PihcbiAgICBldmVudFR5cGU6IFRFdmVudCxcbiAgICAuLi5hcmdzOiBURXZlbnRUb0FyZ3NNYXBbVEV2ZW50XVxuICApOiB2b2lkIHtcbiAgICBjb25zdCByZWdpc3RyYXRpb25zOiA/U2V0PFJlZ2lzdHJhdGlvbjxURXZlbnRUb0FyZ3NNYXBbVEV2ZW50XT4+ID1cbiAgICAgIHRoaXMuI3JlZ2lzdHJ5W2V2ZW50VHlwZV07XG4gICAgaWYgKHJlZ2lzdHJhdGlvbnMgIT0gbnVsbCkge1xuICAgICAgLy8gQ29weSBgcmVnaXN0cmF0aW9uc2AgdG8gdGFrZSBhIHNuYXBzaG90IHdoZW4gd2UgaW52b2tlIGBlbWl0YCwgaW4gY2FzZVxuICAgICAgLy8gcmVnaXN0cmF0aW9ucyBhcmUgYWRkZWQgb3IgcmVtb3ZlZCB3aGVuIGxpc3RlbmVycyBhcmUgaW52b2tlZC5cbiAgICAgIGZvciAoY29uc3QgcmVnaXN0cmF0aW9uIG9mIEFycmF5LmZyb20ocmVnaXN0cmF0aW9ucykpIHtcbiAgICAgICAgcmVnaXN0cmF0aW9uLmxpc3RlbmVyLmFwcGx5KHJlZ2lzdHJhdGlvbi5jb250ZXh0LCBhcmdzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBhbGwgcmVnaXN0ZXJlZCBsaXN0ZW5lcnMuXG4gICAqL1xuICByZW1vdmVBbGxMaXN0ZW5lcnM8VEV2ZW50OiAkS2V5czxURXZlbnRUb0FyZ3NNYXA+PihcbiAgICBldmVudFR5cGU/OiA/VEV2ZW50LFxuICApOiB2b2lkIHtcbiAgICBpZiAoZXZlbnRUeXBlID09IG51bGwpIHtcbiAgICAgIHRoaXMuI3JlZ2lzdHJ5ID0ge307XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlbGV0ZSB0aGlzLiNyZWdpc3RyeVtldmVudFR5cGVdO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgcmVnaXN0ZXJlZCBsaXN0ZW5lcnMgZm9yIHRoZSBzdXBwbGllZCBldmVudC5cbiAgICovXG4gIGxpc3RlbmVyQ291bnQ8VEV2ZW50OiAkS2V5czxURXZlbnRUb0FyZ3NNYXA+PihldmVudFR5cGU6IFRFdmVudCk6IG51bWJlciB7XG4gICAgY29uc3QgcmVnaXN0cmF0aW9uczogP1NldDxSZWdpc3RyYXRpb248bWl4ZWQ+PiA9IHRoaXMuI3JlZ2lzdHJ5W2V2ZW50VHlwZV07XG4gICAgcmV0dXJuIHJlZ2lzdHJhdGlvbnMgPT0gbnVsbCA/IDAgOiByZWdpc3RyYXRpb25zLnNpemU7XG4gIH1cbn1cblxuZnVuY3Rpb24gYWxsb2NhdGU8XG4gIFRFdmVudFRvQXJnc01hcDogey4uLn0sXG4gIFRFdmVudDogJEtleXM8VEV2ZW50VG9BcmdzTWFwPixcbiAgVEV2ZW50QXJnczogVEV2ZW50VG9BcmdzTWFwW1RFdmVudF0sXG4+KFxuICByZWdpc3RyeTogUmVnaXN0cnk8VEV2ZW50VG9BcmdzTWFwPixcbiAgZXZlbnRUeXBlOiBURXZlbnQsXG4pOiBTZXQ8UmVnaXN0cmF0aW9uPFRFdmVudEFyZ3M+PiB7XG4gIGxldCByZWdpc3RyYXRpb25zOiA/U2V0PFJlZ2lzdHJhdGlvbjxURXZlbnRBcmdzPj4gPSByZWdpc3RyeVtldmVudFR5cGVdO1xuICBpZiAocmVnaXN0cmF0aW9ucyA9PSBudWxsKSB7XG4gICAgcmVnaXN0cmF0aW9ucyA9IG5ldyBTZXQoKTtcbiAgICByZWdpc3RyeVtldmVudFR5cGVdID0gcmVnaXN0cmF0aW9ucztcbiAgfVxuICByZXR1cm4gcmVnaXN0cmF0aW9ucztcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztJQThEcUJBLFlBQVksR0FBQUMsT0FBQSxDQUFBQyxPQUFBO0VBQUEsU0FBQUYsYUFBQTtJQUFBLElBQUFHLGdCQUFBLENBQUFELE9BQUEsUUFBQUYsWUFBQTtJQUFBSSxNQUFBLENBQUFDLGNBQUEsT0FBQUMsU0FBQTtNQUFBQyxRQUFBO01BQUFDLEtBQUEsRUFHUSxDQUFDO0lBQUM7RUFBQTtFQUFBLFdBQUFDLGFBQUEsQ0FBQVAsT0FBQSxFQUFBRixZQUFBO0lBQUFVLEdBQUE7SUFBQUYsS0FBQSxFQU16QyxTQUFBRyxZQUNFQyxTQUFpQixFQUNqQkMsUUFBcUQsRUFDckRDLE9BQWMsRUFDSztNQUNuQixJQUFJ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